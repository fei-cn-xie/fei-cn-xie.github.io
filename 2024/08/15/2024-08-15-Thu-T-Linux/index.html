

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/boy.webp">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Fei">
  <meta name="keywords" content="">
  
    <meta name="description" content="一、基础篇1.1 Linux入门linux 官网: www.kernel.org 网站扫描: https:&#x2F;&#x2F;sitereport.netcraft.com  Linux和Unix关系 Uninx BSD FreeBSD   Sun Solaris IBM AIX AT&amp;T System V Minix GUN&#x2F;Linux内核 Ubuntu RedHat centOS Redha">
<meta property="og:type" content="article">
<meta property="og:title" content="2024-08-15-Thu-T-Linux">
<meta property="og:url" content="http://example.com/2024/08/15/2024-08-15-Thu-T-Linux/index.html">
<meta property="og:site_name" content="Fei">
<meta property="og:description" content="一、基础篇1.1 Linux入门linux 官网: www.kernel.org 网站扫描: https:&#x2F;&#x2F;sitereport.netcraft.com  Linux和Unix关系 Uninx BSD FreeBSD   Sun Solaris IBM AIX AT&amp;T System V Minix GUN&#x2F;Linux内核 Ubuntu RedHat centOS Redha">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/2024-08-15-Thu-T-Linux/vim%E7%BC%96%E8%BE%91%E5%99%A8%E7%9A%84%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%BC%8F.svg">
<meta property="article:published_time" content="2024-08-15T06:04:56.000Z">
<meta property="article:modified_time" content="2025-04-16T09:00:27.677Z">
<meta property="article:author" content="Fei">
<meta property="article:tag" content="Tech">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/img/2024-08-15-Thu-T-Linux/vim%E7%BC%96%E8%BE%91%E5%99%A8%E7%9A%84%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%BC%8F.svg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>2024-08-15-Thu-T-Linux - Fei</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.5-a","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fei</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">2024-08-15-Thu-T-Linux</span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-08-15 14:04" pubdate>
          August 15, 2024 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          30k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          248 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">2024-08-15-Thu-T-Linux</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="一、基础篇"><a href="#一、基础篇" class="headerlink" title="一、基础篇"></a>一、基础篇</h1><h2 id="1-1-Linux入门"><a href="#1-1-Linux入门" class="headerlink" title="1.1 Linux入门"></a>1.1 Linux入门</h2><p>linux 官网: <a target="_blank" rel="noopener" href="http://www.kernel.org/">www.kernel.org</a></p>
<p>网站扫描: <a target="_blank" rel="noopener" href="https://sitereport.netcraft.com/">https://sitereport.netcraft.com</a></p>
<ul>
<li>Linux和Unix关系<ul>
<li>Uninx<ul>
<li>BSD<ul>
<li>FreeBSD</li>
</ul>
</li>
<li>Sun Solaris</li>
<li>IBM AIX</li>
<li>AT&amp;T System V</li>
<li>Minix<ul>
<li>GUN&#x2F;Linux内核<ul>
<li>Ubuntu</li>
<li>RedHat<ul>
<li>centOS</li>
<li>RedhatOS</li>
</ul>
</li>
<li>SUSE</li>
<li>Fedora</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-2-vm和Linux安装"><a href="#1-2-vm和Linux安装" class="headerlink" title="1.2 vm和Linux安装"></a>1.2 vm和Linux安装</h2><p>使用相应工具安装linux虚拟机, 本文使用multipass安装虚拟机<br>安装multipass <code>brew install multipass</code></p>
<p>虚拟机网络连接模式介绍</p>
<ul>
<li>桥接模式: 虚拟机会获得一个与主机网络相同网段的IP地址，与主机、同网段的其他设备以及外网设备进行通信. 桥接模式将虚拟机直接连接到物理网络，虚拟机像是主机网络中的一台真实设备, 适合需要与外网和局域网中的其他设备自由通信的虚拟机，常用于企业网络、开发测试等。可能会引起ip冲突. </li>
<li>NAT模式: 虚拟机被分配一个虚拟的私有IP地址，外部网络无法直接访问该虚拟机。虚拟机通过主机的NAT转发来访问外网，主机充当网关角色。虚拟机只能通过主机访问外网，不能直接访问局域网中的其他设备。不会引起ip冲突</li>
<li>仅主机模式:仅主机模式为虚拟机和主机之间创建一个完全隔离的网络环境，虚拟机不能直接访问外网。虚拟机和主机通过一个专用的虚拟网络接口互相通信，但不会与外部网络相连。不能访问外网，也不能与局域网中的其他设备通信。</li>
</ul>
<p>虽然虚拟机与局域网中的其他设备隔离，但虚拟机与主机之间仍然可以直接通信。通常，Multipass 会为主机和虚拟机建立一个虚拟网络接口，用于相互访问。<br>通过这个接口，主机可以使用虚拟机的内部 IP 地址直接访问虚拟机的服务。这个功能设计为方便主机与虚拟机之间的数据交换，尤其是在不需要外部网络访问的开发和测试场景中。</p>
<h2 id="1-3-Linux目录结构"><a href="#1-3-Linux目录结构" class="headerlink" title="1.3 Linux目录结构"></a>1.3 Linux目录结构</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs shell">├── bin -&gt; usr/bin<br>├── bin.usr-is-merged<br>├── boot<br>├── dev<br>├── etc<br>├── home<br>├── lib -&gt; usr/lib<br>├── lib.usr-is-merged<br>├── lost+found<br>├── media<br>├── mnt<br>├── opt<br>├── proc<br>├── root<br>├── run<br>├── sbin -&gt; usr/sbin<br>├── sbin.usr-is-merged<br>├── snap<br>├── srv<br>├── sys<br>├── tmp<br>├── usr<br>└── var<br></code></pre></td></tr></table></figure>

<ul>
<li><code>/bin (/usr/bin, /usr/local/bin)</code>: Binary的缩写, 用于存放经常使用的命令</li>
<li><code>/sbin (/usr/sbin, /usr/local/sbin)</code>: Super User Binary, 系统管理员使用的系统管理命令</li>
<li><code>/home</code>: 存放普通用户的目录</li>
<li><code>/root</code>: 管理员用户主目录</li>
<li><code>/lib</code>: 系统开机所需要的最基本的动态连接共享库</li>
<li><code>/lost+found</code>: 这个目录一般情况是空的, 当系统非法关机后, 这里会存放一些文件</li>
<li><code>/etc</code>: 所有的系统管理所需要的配置文件和子目录</li>
<li><code>/usr</code>: 用户的很多应用程序文件都放在这个目录下, 类似于windows program files</li>
<li><code>/boot</code>: 存放用于启动Linux的一些核心文件, 包括连接文件和镜像文件</li>
<li><code>/proc</code>: 虚拟的目录, 系统内存的映射, 访问这个目录可以获取系统信息</li>
<li><code>/srv</code>: service缩写, 存放一些服务启动后需要提取的数据</li>
<li><code>/sys</code>: 这是linux2.6内核的一个变化, 该目录下安装了2.6内核新出现的一个文件系统sysfs</li>
<li><code>/tmp</code>: 用于存放临时文件</li>
<li><code>/dev</code>: device, 所有的硬件用文件的形式存储到此处</li>
<li><code>/media</code>: Linux会自动识别一些设备, 如U盘, 光驱, 当识别到这些设备后, 会将其挂载在此目录下</li>
<li><code>/mnt</code>: 挂载其他文件系统使用</li>
<li><code>/opt</code>: 给主机额外安装软件所摆放的目录, </li>
<li><code>/usr/local</code>: 给主机额外安装软件的安装目录, 一般是通过通过编译源码的方式安装的程序</li>
<li><code>/var</code>: 用于存放日志等不断扩充的内容, 或者经常被修改的内容都存放在此目录下</li>
<li><code>/selinux</code>: security enhanced linux, selinux是一种安全子系统, 它能控制程序, 有三种模式, 可以自行设置.</li>
</ul>
<h1 id="二、实际操作篇"><a href="#二、实际操作篇" class="headerlink" title="二、实际操作篇"></a>二、实际操作篇</h1><h2 id="2-1-远程登录"><a href="#2-1-远程登录" class="headerlink" title="2.1 远程登录"></a>2.1 远程登录</h2><p> 编辑虚拟机ssh配置文件<code>/etc/ssh/sshd_config</code><br> 修改或添加: <code>PermitRootLogin yes</code><br> 这样虚拟机可以通过ssh服务进行账号密码的登录<br> <code>ssh -p22 root@192.168.64.19</code></p>
<p> 同时可以进行文件传输<br> <code>scp root@node2:/home/ubuntu/cni-plugins-linux-amd64-v1.3.0.tgz ./</code> : 此命令将远程主机node2上的文件下载到当前目录下  </p>
<h2 id="2-2-vim和vi"><a href="#2-2-vim和vi" class="headerlink" title="2.2 vim和vi"></a>2.2 vim和vi</h2><p> Linux系统会内置vi编辑器<br> vim是vi的增强版本, 可以主动根据字体颜色辨别语法正确性. 代码补全, 编译以及错误跳转等方便编程等功能特别丰富<br> 命令行输入<code>vimtutor</code>进入vim tutor, 可以学习一些基本操作<br> <a target="_blank" rel="noopener" href="https://yianwillis.github.io/vimcdoc/doc/usr_01.html#usr_01.txt">vim手册(同<code>:help user-manual</code>)</a></p>
<p> <strong>vi和vim的三种模式</strong><br> 其实官方文档里没有按照此分类</p>
<ol>
<li>默认模式<br>   以vim打开一个文档就进入了默认模式. 在这个模式中, 可以使用上下左右键和删除键来移动光标. 同时可以通过一些字母键来编辑文本内容</li>
<li>插入模式<br>   按下: <code>i</code>, <code>I</code>, <code>o</code>, <code>O</code>, <code>a</code>, <code>A</code>, <code>r</code>, <code>R</code>等任何一个字符进入编辑模式, 通常使用<code>i</code>. (airo)<br>   <code>i</code>:从当前光标之前插入<br>   <code>I</code>: 从行首插入<br>   <code>A</code>: 从行尾追加<br>   <code>a</code>: 从当前光标之后追加<br>   <code>r</code>: 替换当前光标所在的单个字符, 替换后自动结束<br>   <code>R</code>: 替换当前光标所在字符, 替换后移动到下一个字符继续替换</li>
<li>命令行模式<br>   在此模式下, 可以根据相关指令, 完成读取, 存盘, 替换, 退出vim, 显示行号等操作.</li>
</ol>
<p> 三种模式的关系:</p>
<p><img src="/img/2024-08-15-Thu-T-Linux/vim%E7%BC%96%E8%BE%91%E5%99%A8%E7%9A%84%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%BC%8F.svg" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<h3 id="2-2-1-快捷键使用"><a href="#2-2-1-快捷键使用" class="headerlink" title="2.2.1 快捷键使用"></a>2.2.1 快捷键使用</h3><p><strong>编辑模式</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1. 拷贝与粘贴</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">拷贝当前行</span><br>yy<br><span class="hljs-meta prompt_"># </span><span class="language-bash">拷贝当前行向下的5行(从当前行为1开始计算, 1,2,3,4,5)</span><br>5yy<br><span class="hljs-meta prompt_"># </span><span class="language-bash">粘贴</span><br>p # 从下一行的行首开始粘贴复制或剪贴的内容<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2.删除</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">删除当前行</span><br>dd<br><span class="hljs-meta prompt_"># </span><span class="language-bash">删除当前行向下的5行(从当前行为1开始计算, 1,2,3,4,5)</span><br>5dd<br><span class="hljs-meta prompt_"># </span><span class="language-bash">删除某个字母</span><br>dw<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">删除光标下的某个字符</span><br>x<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">撤销上一步操作</span><br>u<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">3. 查找</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">在文件中查找某个单词, 例如: <span class="hljs-string">&quot;test&quot;</span></span><br>/test # 输入回车后查找, 查找下一个输入n<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">4. 设置</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">设置文件行号</span><br>set nu # 开启行号<br>set nonu # 关闭行号<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">5. 其他操作</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">移动到首行 good game</span><br>gg<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">移动到末行</span><br>G<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">移动到当前行的行首</span><br>0<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">移动到当前行的行尾</span><br><span class="hljs-meta prompt_">$</span><span class="language-bash"></span><br><span class="language-bash"></span><br><br><br><br><br></code></pre></td></tr></table></figure>

<h2 id="2-3-开机、重启和用户登录、注销"><a href="#2-3-开机、重启和用户登录、注销" class="headerlink" title="2.3 开机、重启和用户登录、注销"></a>2.3 开机、重启和用户登录、注销</h2><h3 id="2-3-1-关机、重启和注销"><a href="#2-3-1-关机、重启和注销" class="headerlink" title="2.3.1 关机、重启和注销"></a>2.3.1 关机、重启和注销</h3><p><code>shutdown -h now</code>: 立即关机, halt<br><code>shutdown</code> &#x3D;&#x3D; <code>shutdown -h 1</code>: 一分钟后关机<br><code>shutdown -r now</code>: 立即重启<br><code>halt</code>: 关机, 不会等待设备关闭, 与shutdown -h now效果相同<br><code>reboot</code>: 重启<br><code>sync</code>: 将内存的数据同步到磁盘  </p>
<p>Note: 不管是重启还是关机, 首先要运行sync命令, 将内存数据写到磁盘,否则数据可能丢失<br>目前shutdown&#x2F;reboot&#x2F;halt 等命令均已经在关机前运行了sync, 但是还是有可能丢失数据, 因此还是建议在关机前运行sync  </p>
<h3 id="2-3-2-用户登录、注销"><a href="#2-3-2-用户登录、注销" class="headerlink" title="2.3.2 用户登录、注销"></a>2.3.2 用户登录、注销</h3><p><code>su -l root</code>: 切换到root用户, -l参数表示登录<br><code>su - root</code>: 切换到root用户, 不登录<br><code>logout</code>: 退出当前用户, 在运行级别5下, 但是在运行级别3下, 退出不会关机  </p>
<h3 id="2-3-3-用户管理"><a href="#2-3-3-用户管理" class="headerlink" title="2.3.3 用户管理"></a>2.3.3 用户管理</h3><p><strong>1. 添加用户</strong><br><code>useradd 用户名</code>: 创建用户, 默认密码为空, 默认家目录为&#x2F;home&#x2F;用户名<br><code>useradd -g 组名 用户名</code>: 为用户指定组<br><code>useradd -d /home/用户名 用户名</code>: 为用户指定家目录  </p>
<p><code>passwd 用户名</code>: 修改用户密码  </p>
<p><strong>2. 修改用户</strong>  </p>
<p><code>usermod -g 组名 用户名</code>: 修改用户组<br><code>usermod -aG sudo 用户名</code>: 将用户添加到sudo用户组  </p>
<p><strong>3. 删除用户</strong><br><code>userdel 用户名</code>: 删除用户, 会保留家目录<br><code>userdel -r 用户名</code>: 删除用户, -r参数表示删除用户家目录<br>一般情况, 建议保留家目录, 以免数据丢失  </p>
<p><strong>4. 查询用户信息</strong><br><code>id 用户名</code>: 查看用户信息<br><code>who</code>: 查看当前登录用户<br><code>w</code>: 查看当前登录用户, 显示时间<br><code>last</code>: 查看系统登录日志<br><code>whoami</code>: 查看当前用户名<br><code>who am i</code>: 查看当前用户名, 显示ip地址, 登录时间  </p>
<h3 id="2-3-4-组管理"><a href="#2-3-4-组管理" class="headerlink" title="2.3.4 组管理"></a>2.3.4 组管理</h3><p><strong>5. 组管理</strong><br><code>groupadd 组名</code>: 创建组<br><code>groupmod -n 新组名 老组名</code>: 修改组名<br><code>groupdel 组名</code>: 删除组  </p>
<p>添加用户时, 如果没有指定组, 则默认生成一个组, 该组名称与用户名相同  </p>
<p><strong>6. 用户和组相关的文件</strong><br><code>/etc/passwd</code>: 用户信息 (用户名:密码:UID:GID:注释:主目录:shell)   </p>
<p><code>/etc/group</code>: 组信息 (组名:密码:GID:用户列表)  </p>
<p><code>/etc/shadow</code>: 用户密码信息 (登录名:加密口令:最后一次密码修改日期:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效日期:标志)  </p>
<h2 id="2-4-实用指令"><a href="#2-4-实用指令" class="headerlink" title="2.4 实用指令"></a>2.4 实用指令</h2><p><code>shel</code>的理解:<br><img src="/img/2024-08-15-Thu-T-Linux/image.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<h3 id="2-4-1-运行级别"><a href="#2-4-1-运行级别" class="headerlink" title="2.4.1 运行级别"></a>2.4.1 运行级别</h3><p><strong>基本介绍</strong>  </p>
<ul>
<li>0: 系统停机状态，系统默认运行级别不能设为0，否则不能正常启动。  </li>
<li>1: 单用户工作状态，root权限，用于系统维护，禁止远程登陆。  </li>
<li>2: 多用户状态(没有NFS)。NFS Network File System，即网络文件系统，用于挂载远程文件系统。  </li>
<li>3: 完全的多用户状态(有NFS)，登陆后进入控制台命令行模式。  </li>
<li>4: 系统未使用，保留。  </li>
<li>5: X11控制台，登陆后进入图形GUI模式。  </li>
<li>6: 系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动。</li>
</ul>
<p><code>systemctl get-default</code>: 获取当前默认运行级别。  </p>
<p>通过init切换运行级别。<br>应用实例: <code>init [0123456]</code>  </p>
<p><strong>开启设定</strong><br>对于centOS7以前: <code>/etc/inittab</code><br>ubuntu:  <code>/usr/lib/systemd/system</code>  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">multi-user.target: analogous to runlevel 3   # 多用户等价于运行级别3<br>graphical.target: analogous to runlevel 5  # 图形化界面等价于运行级别5<br></code></pre></td></tr></table></figure>

<p>设置默认的运行级别: <code>systemctl set-default graphical.target</code>  </p>
<h3 id="2-4-2-帮助指令"><a href="#2-4-2-帮助指令" class="headerlink" title="2.4.2 帮助指令"></a>2.4.2 帮助指令</h3><p><code>man [命令或配置文件]</code>: 查看帮助<br><code>help [命令]</code>: 查看shell内置命令的帮助信息<br><code>top</code>: 查看系统进程使用情况<br><code>history</code>: 查看命令历史, <code>history 10</code>: 查看最近10条命令, <code>!100</code>: 执行历史记录中第100条命令<br><code>df -h</code>: 查看磁盘使用情况<br><code>free -m</code>: 查看内存使用情况  </p>
<h2 id="2-4-3-文件-文件夹操作"><a href="#2-4-3-文件-文件夹操作" class="headerlink" title="2.4.3 文件&#x2F;文件夹操作"></a>2.4.3 文件&#x2F;文件夹操作</h2><p><code>mkdir [选项] 目录名</code>: 创建目录, <code>-p</code>创建多级目录<br><code>rmdir [选项] 目录名</code>: 删除空目录<br><code>touch [选项] 文件名</code>: 创建文件<br><code>rm [选项] 文件名</code>: 删除文件, <code>-r</code>递归删除<br><code>cp [选项] 源文件 目标文件</code>: 复制文件<br><code>mv [选项] 源文件 目标文件</code>: 移动文件, <code>-u</code>移动文件并更新软连接<br><code>ln [选项] 源文件 软连接名</code>: 创建软连接, <code>-s</code>创建软连接<br><code>cat [选项] 文件名</code>: 显示文件内容, <code>-n</code>显示行数<br><code>head [选项] 文件名</code>: 显示文件前几行, <code>-n</code>指定显示前n行, 不加参数则显示前10行<br><code>tail [选项] 文件名</code>: 显示文件后几行, <code>-n</code>指定显示后n行, 不加参数则显示后10行, <code>-f</code>实时显示文件内容<br><code>more [选项] 文件名</code>: 分页显示文件内容,<br><code>less [选项] 文件名</code>: 分页显示文件内容, <code>/</code>搜索, <code>n</code>下一行, <code>N</code>上一行, <code>q</code>退出  </p>
<h3 id="2-4-4-时间日期类"><a href="#2-4-4-时间日期类" class="headerlink" title="2.4.4 时间日期类"></a>2.4.4 时间日期类</h3><p><code>date +%Y-%m-%d_%H:%M:%S</code>: 2024-11-07_03:08:38  </p>
<h3 id="2-4-5-搜索查找类"><a href="#2-4-5-搜索查找类" class="headerlink" title="2.4.5 搜索查找类"></a>2.4.5 搜索查找类</h3><p><code>find [选项] 路径名</code>: 在指定路径下查找文件, <code>-name</code>按文件名查找, <code>-user</code>按用户查找, <code>-type</code>按文件类型查找, <code>-mtime</code>按修改时间查找, <code>-size</code>按文件大小查找(+代表大于, -代表小于, 不写代表等于. k, M, G), <code>-exec</code>执行命令, <code>-delete</code>删除文件  </p>
<p><code>locate 文件名</code>: 定位文件路径, 第一次执行之前需要执行<code>updatedb</code>命令  </p>
<p><code>grep [选项] 关键字 文件名</code>: 在文件中查找关键字, <code>-i</code>不区分大小写, <code>-n</code>显示行号和匹配行, <code>-v</code>反向查找, <code>-r</code>递归查找, <code>-l</code>只显示文件名  </p>
<h3 id="2-4-6-压缩和解压"><a href="#2-4-6-压缩和解压" class="headerlink" title="2.4.6 压缩和解压"></a>2.4.6 压缩和解压</h3><p><code>gzip [选项] 文件名</code>: 压缩文件, 只能压缩为*.gz文件 <code>-d</code>解压文件, <code>-k</code>保留文件名, <code>-f</code>强制解压, <code>-c</code>压缩文件到标准输出<br><code>gunzip [选项] 文件名</code>: 解压文件  </p>
<p><code>zip [选项] 文件名 压缩的内容</code>: 压缩文件, 可以压缩为*.zip文件, <code>-r</code>递归压缩, <code>-d</code>解压文件, <code>-k</code>保留文件名, <code>-f</code>强制解压, <code>-c</code>压缩文件到标准输出<br><code>unzip [选项] 文件名</code>: 解压文件, <code>-d</code>指定解压路径  </p>
<p><code>tar [选项] xxx.tar.gz 打包的内容</code>: 压缩文件, 可以压缩为*.tar.gz文件, <code>-z</code>打包同时压缩, <code>-v</code>显示详细信息, <code>-f</code>指定压缩后的文件名, <code>-c</code>产生.tar打包文件, <code>-x</code>解压.tar文件  </p>
<h2 id="2-5-组管理和权限管理"><a href="#2-5-组管理和权限管理" class="headerlink" title="2.5 组管理和权限管理"></a>2.5 组管理和权限管理</h2><p>在linux中, 每个用户必须属于一个组, 不能独立于组之外.<br>对于每一个文件, 有:  </p>
<ul>
<li>所有者</li>
<li>所在组</li>
<li>其他组</li>
</ul>
<p><code>chown [选项] 新所有者:新组 新文件</code>: 修改文件所有者和所在组, <code>-R</code>递归修改<br><code>groupadd [选项] 新组名</code>: 创建新组<br><code>groupmod [选项] 老组名 新组名</code>: 修改组名<br><code>chgrp [选项] 新组 新文件</code>: 修改文件所在组, <code>-R</code>递归修改  </p>
<p><code>usermod -g 新组 用户名</code>: 修改用户所在组<br><code>usermod -d 新目录 用户名</code>: 修改用户主目录, <code>-m</code>将用户主目录移动到新目录(usermod -d &#x2F;home&#x2F;tom -m newtomgroup)  </p>
<p><strong>权限介绍</strong>  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">ls -l # 显示的内容如下:  <br>drwxr-x--- 6 ubuntu ubuntu 4096 Nov  7 02:52    ubuntu<br>0123456789 10   11   12    13(byte) 14(modify time)   15<br></code></pre></td></tr></table></figure>
<p>0-9位说明:  </p>
<ul>
<li><p>第0位: 文件类型</p>
<ul>
<li><code>d</code>: 目录</li>
<li><code>-</code>: 普通文件</li>
<li><code>l</code>: 符号链接</li>
<li><code>c</code>: 字符设备文件</li>
<li><code>b</code>: 块设备文件, 比如硬盘</li>
</ul>
</li>
<li><p>第1-3位: 文件所有者权限</p>
</li>
<li><p>第4-6位: 文件所在组权限</p>
</li>
<li><p>第7-9位: 其他用户权限</p>
<ul>
<li><code>r</code> &#x3D;&#x3D; <code>4</code>: 读权限</li>
<li><code>w</code> &#x3D;&#x3D; <code>2</code>: 写权限</li>
<li><code>x</code> &#x3D;&#x3D; <code>1</code>: 执行权限</li>
</ul>
</li>
</ul>
<p>第10位说明: </p>
<ul>
<li>如果是目录: 子目录数</li>
<li>如果是文件: 硬链接数</li>
</ul>
<p><strong>chmod详解</strong>  </p>
<ol>
<li>第一种类型操作  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">通过+ - =变更权限</span><br>chmod g+w file # 没有指定u,g,o,a则默认添加给所有者权限, 添加给其他组除写权限之外的指定权限<br>chmod g+wrx file # 添加给所在组rwx权限<br>chmod o-wrx file # 删除其他组rwx权限<br>chmod o=x file #给其他组执行权限<br></code></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><code>u</code>: 所有者</li>
<li><code>g</code>: 所在组</li>
<li><code>o</code>: 其他用户</li>
<li><code>a</code>: 所有者、所在组、其他用户</li>
</ul>
<ol start="2">
<li>第二种类型操作</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">通过4, 2, 1 变更权限</span><br>chmod 777 file # 添加rwx权限给所有用户<br>chmod 755 file # 添加rwx权限给所在组和执行权限给其他用户<br>chmod 751 file # 添加rwx权限给所在组和rw权限给其他用户<br>chmod 640 file # 添加rw权限给所在组，添加x权限给其他用户<br><br></code></pre></td></tr></table></figure>
<ul>
<li><code>4</code>: 读权限</li>
<li><code>2</code>: 写权限</li>
<li><code>1</code>: 执行权限</li>
</ul>
<h2 id="2-6-定时任务调度"><a href="#2-6-定时任务调度" class="headerlink" title="2.6 定时任务调度"></a>2.6 定时任务调度</h2><h3 id="2-6-1-crontab定时任务"><a href="#2-6-1-crontab定时任务" class="headerlink" title="2.6.1 crontab定时任务"></a>2.6.1 crontab定时任务</h3><p><code>crontab [选项]</code> :</p>
<ul>
<li><code>-e</code>: 编辑crontab文件</li>
<li><code>-l</code>: 查询crontab任务</li>
<li><code>-r</code>: 删除当前用户crontab文件</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">* * * * * /bin/bash /root/script.sh # 每分钟执行一次<br>*/1 * * * * /bin/bash /root/script.sh # 每隔1分钟执行一次<br>0 8 * * * /bin/bash /root/script.sh # 每天早上8点执行一次<br>0 8 * * 1 /bin/bash /root/script.sh # 每周一早上8点执行一次<br>0 8 1 * * /bin/bash /root/script.sh # 每月1号早上8点执行一次<br>0 8 1 1,6,12,18 * /bin/bash /root/script.sh # 每月1号、6号、12号、18号早上8点执行一次<br><br></code></pre></td></tr></table></figure>
<ul>
<li><code>*</code>: 任意值</li>
<li><code>-</code>: 值范围, 如: 1-5 表示1到5</li>
<li><code>/</code>: 步长</li>
<li><code>,</code>: 列举多个值, 如: 1,3,5</li>
</ul>
<p><strong>其他操作</strong>  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">service crond restart # 重启定时服务<br><br></code></pre></td></tr></table></figure>

<h3 id="2-6-2-at定时任务"><a href="#2-6-2-at定时任务" class="headerlink" title="2.6.2 at定时任务"></a>2.6.2 at定时任务</h3><p><code>at</code>命令是一次性定时任务，需要指定时间，在指定的时间执行命令，命令执行完毕，该定时任务自动结束。<br>默认情况是1分钟后执行  </p>
<p><code>at [选项] 时间</code>: 在指定时间执行命令, 输入CRL+D结束输入  </p>
<p><code>at</code>选项: </p>
<ul>
<li><code>-f &lt;文件名&gt;</code> : 从指定文件读取任务</li>
<li><code>-m</code>: 任务完成后发送邮件通知</li>
<li><code>-q &lt;队列名&gt;</code>: 指定队列名，默认为<code>cron</code></li>
<li><code>-t &lt;时间戳&gt;</code>: 指定时间戳，格式为<code>%s</code>，如<code>1577836800</code>，表示2020年1月1日0点0分0秒</li>
<li><code>-I</code>: 列出<code>at</code>队列, 等同于<code>atq</code> </li>
<li><code>-d &lt;任务ID&gt;</code>: 删除指定任务, 等同于<code>atrm</code></li>
<li><code>-v</code>: 显示任务将被执行的时间</li>
<li><code>-l</code>: 列出所有任务</li>
<li><code>-c &lt;任务ID&gt;</code>: 打印任务的内容到标准输出(命令行)</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">实例</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">指定时间</span><br>at 10:00 2024-08-15 <br><span class="hljs-meta prompt_">at&gt; </span><span class="language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello world&quot;</span> &gt;&gt; /tmp/test.txt</span><br><span class="hljs-meta prompt_">at&gt; </span><span class="language-bash"><span class="hljs-built_in">date</span> &gt;&gt; /tmp/test.txt</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">相对时间</span><br>at now + 5 minutes<br>at now + 7 hours<br>at now + 1 days<br>at now + 1 weeks<br>at now + 1 months<br>at now + 1 years  <br><br></code></pre></td></tr></table></figure>


<h2 id="2-7-磁盘分区、挂载"><a href="#2-7-磁盘分区、挂载" class="headerlink" title="2.7 磁盘分区、挂载"></a>2.7 磁盘分区、挂载</h2><p>Linux无论有几个分区, 分给哪一个目录使用, 它归根结底就只有一个根目录, 一个独立的且唯一的文件结构. Linux中每个分区都是用来组成整个文件系统的一部分.<br>Linux采用了一种叫“载入”的处理方法, 它的整个文件系统中包含了一整套的文件和目录, 且将一个分区和一个目录关联起来, 这样, 就可以认为, 这个分区是属于这个目录的.<br>示意图:<br><img src="/img/2024-08-15-Thu-T-Linux/image-2.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<h3 id="2-7-1-磁盘分区及挂载"><a href="#2-7-1-磁盘分区及挂载" class="headerlink" title="2.7.1 磁盘分区及挂载"></a>2.7.1 磁盘分区及挂载</h3><p><code>lsblk</code> 或 <code>lsblk -f</code>: 查看磁盘分区情况<br><code>fdisk /dev/sda</code>: 分区磁盘  </p>
<ul>
<li><code>m</code>: 查看命令列表  </li>
<li><code>l</code>: 查看磁盘分区情况, 同 <code>p</code>  </li>
<li><code>n</code>: 新增分区  </li>
<li><code>d</code>: 删除分区</li>
<li><code>w</code>: 写入分区</li>
</ul>
<p>分区完成后, 需要格式化磁盘分区, 格式化磁盘分区, 可以使用<code>mkfs</code>命令:<br><code>mkfs -t ext4 /dev/sda1</code>: 格式化磁盘分区, <code>ext4</code>是文件系统类型<br>挂载磁盘分区(临时, 重启后会丢失):<br><code>mount /dev/sda1 /mnt/data</code>: 将磁盘分区挂载到<code>/mnt/data</code>目录下<br>卸载磁盘分区:<br><code>umount /dev/sda1</code>: 卸载磁盘分区  </p>
<p>挂载磁盘分区(永久):<br><code>vim /etc/fstab</code>: 编辑挂载文件, 将磁盘分区挂载到<code>/mnt/data</code>目录下  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">/dev/sda1    /mnt/data      ext4    defaults        0 0<br><span class="hljs-meta prompt_"># </span><span class="language-bash">设备         挂载点        文件系统       选项       dump(0表示不备份,1表示备份)    fsck(0表示不检查硬盘, 1检查其他目录, 2检查根目录)</span><br></code></pre></td></tr></table></figure>
<p>修改<code>/etc/fstab</code>文件后, 需要重启系统,或使用<code>mount -a</code>能生效:  </p>
<h3 id="2-7-2-磁盘情况查询"><a href="#2-7-2-磁盘情况查询" class="headerlink" title="2.7.2 磁盘情况查询"></a>2.7.2 磁盘情况查询</h3><p><code>df -h</code>: 查看磁盘使用情况<br><code>du [选项] [文件或目录]</code>: 显示该目录及该目下目录或文件磁盘占用情况<br>  -<code>-h</code>: 显示时带计量单位, 如: 1K, 1M, 1G<br>  -<code>-s</code>: 仅显示该目录大小<br>  -<code>--max-depth</code>: 限制显示目录深度, 默认不限制<br>  -<code>-c</code>: 列出明细同时, 显示汇总(total)值<br>  -<code>-a</code>: 显示所有文件, 包括隐藏文件  </p>
<h3 id="2-7-3-磁盘实用指令"><a href="#2-7-3-磁盘实用指令" class="headerlink" title="2.7.3 磁盘实用指令"></a>2.7.3 磁盘实用指令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1. 统计/opt文件夹下“文件”的个数</span><br>ls -l /opt | grep &quot;^-&quot; | wc -l<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. 统计/opt文件夹下“目录”的个数</span><br>ls -l /opt | grep &quot;^d&quot; | wc -l<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">3. 统计/opt文件夹及子目录下“文件”的个数</span><br>ls -lR /opt | grep &quot;^-&quot; | wc -l<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">4. 以树状结构显示目录结构</span><br>tree /opt -L 2 # 显示深度为2<br> <br><br><br></code></pre></td></tr></table></figure>

<h2 id="2-8-网络配置"><a href="#2-8-网络配置" class="headerlink" title="2.8 网络配置"></a>2.8 网络配置</h2><p><img src="/img/2024-08-15-Thu-T-Linux/image-1.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<ul>
<li>IP获取方式<ul>
<li>DHCP 动态获取IP地址</li>
<li>静态配置IP地址</li>
</ul>
</li>
</ul>
<h3 id="2-8-1-静态配置IP地址"><a href="#2-8-1-静态配置IP地址" class="headerlink" title="2.8.1 静态配置IP地址"></a>2.8.1 静态配置IP地址</h3><p>直接修改配置文件来指定IP, 并可以连接到外网(推荐)  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">CentOS 的ens33网卡配置为例</span><br>vim /etc/sysconfig/network-scripts/ifcfg-ens33<br><span class="hljs-meta prompt_"># </span><span class="language-bash">修改内容如下</span><br>DEVICE=eth0 # 接口名(设备, 网卡)<br>HWADDR=00:50:56:00:00:00 # 网卡MAC地址<br>TYPE= Ethernet # 网络类型<br>UUID= 01b0f841-c5c3-4a23-a6f2-035a83b0acb7 # 网卡唯一标识<br>NOBOOT=no # 系统启动时, 网络接口是否有效<br>BOOTPROTO= static # IP的配置方法, none(引导时不使用协议)|dhcp(动态分配)|bootp(bootp协议)|static(静态手动分配)<br>IPADDR= 192.168.1.100 # IP地址<br>GATEWAY= 192.168.1.1 # 网关IP地址<br>DNS1= 114.114.114.114 # DNS服务器IP地址<br><br></code></pre></td></tr></table></figure>

<h3 id="2-8-2-设置主机名和hosts映射"><a href="#2-8-2-设置主机名和hosts映射" class="headerlink" title="2.8.2 设置主机名和hosts映射"></a>2.8.2 设置主机名和hosts映射</h3><p>为了方便记忆, 可以给Linux系统设置主机名, 也可以根据需要修改主机名<br><code>hostname</code>: 查看当前主机名<br>修改文件<code>/etc/hostname</code>文件, 修改主机名. 修改后重启生效<br>设置主机名和hosts映射: <code>vim /etc/hosts</code>  </p>
<h3 id="2-8-3-主机名解析分析"><a href="#2-8-3-主机名解析分析" class="headerlink" title="2.8.3 主机名解析分析"></a>2.8.3 主机名解析分析</h3><p>实例: 用户在浏览器输入了<a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a><br><img src="/img/2024-08-15-Thu-T-Linux/image-3.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<h2 id="2-9-进程管理"><a href="#2-9-进程管理" class="headerlink" title="2.9 进程管理"></a>2.9 进程管理</h2><p>在linux中, 每个执行的程序都称为一个进程, 每一个进程都分配一个ID号(PID, 进程号)<br>每一个进程都可能以两种方式存在:  </p>
<ul>
<li>前台: 用户目前屏幕上可以进行操作的进程</li>
<li>后台: 实际在运行中, 但是屏幕无法看到</li>
</ul>
<p>一般系统的服务都是以后台进程的方式存在, 而且都会常驻载系统中, 直到关机才结束  </p>
<h3 id="2-9-1-查看与终止进程"><a href="#2-9-1-查看与终止进程" class="headerlink" title="2.9.1 查看与终止进程"></a>2.9.1 查看与终止进程</h3><ul>
<li>显示系统执行的程序<ul>
<li><code>ps</code>: 显示当前正在运行的进程  <ul>
<li><code>ps -a</code>: 显示所有进程, 包括前台和后台进程  </li>
<li><code>ps -u</code>: 以用户身份显示  </li>
<li><code>ps -x</code>: 显示后台进程运行的参数</li>
<li><code>ps -ef</code>: 以全格式显示当前所有进程, -e显示所有进程, -f全格式</li>
</ul>
</li>
</ul>
</li>
<li>终止进程<ul>
<li><code>kill [选项] 进程号</code>: 终止进程<ul>
<li><code>kill -9 进程号</code>: 强制终止进程, 强制终止进程, 即使该进程正在运行中, 也可以强制终止</li>
</ul>
</li>
<li><code>killall 进程名称</code>: 终止进程名称为进程名称的进程</li>
</ul>
</li>
</ul>
<p>最佳实践:  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1. 踢掉某个非法登录用户</span><br>ps -aux | grep &quot;sshd&quot; # 通过查询sshd运行服务, 找到tom登录的进程号<br>kill 11421 # 强制终止11421进程, 从而让踢掉tom登录<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. 终止远程登录服务sshd, 在适当的时候再重启sshd服务</span><br>kill sshd服务对应的进程号<br>systemctl start sshd<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">3. 终止多个gedit</span><br>killall gedit <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">4. 强制杀死一个终端(命令行)</span><br>ps -aux | grep &quot;bash&quot;<br>kill -9 10487 # 不使用-9参数, 无法终止终端命令行<br><br></code></pre></td></tr></table></figure>

<p><strong>查看进程树</strong><br><code>pstree [选项]</code>: 可以更直观的来看进程信息  </p>
<ul>
<li><code>-p</code>: 显示进程的PID  </li>
<li><code>-u</code>: 显示进程的用户名</li>
</ul>
<h3 id="2-9-2-服务-service-管理"><a href="#2-9-2-服务-service-管理" class="headerlink" title="2.9.2 服务(service)管理"></a>2.9.2 服务(service)管理</h3><p> service本质就是进程, 但是是运行在后台的, 通常都会监听某个端口, 等待其他进程的请求, 比如(mysql, sshd, 防火墙等). 因此我们又称为守护进程,   </p>
<p> service管理指令:</p>
<ul>
<li><code>service|systemctl [选项] 服务名 [start|stop|restart|reload|status]</code>: 管理服务</li>
</ul>
<h3 id="2-9-3-服务管理"><a href="#2-9-3-服务管理" class="headerlink" title="2.9.3 服务管理"></a>2.9.3 服务管理</h3><p>Linux系统有7种运行级别, 常用的是3和5  </p>
<ul>
<li>0: 系统停机状态，系统默认运行级别不能设为0，否则不能正常启动。  </li>
<li>1: 单用户工作状态，root权限，用于系统维护，禁止远程登陆。  </li>
<li>2: 多用户状态(没有NFS)。NFS Network File System，即网络文件系统，用于挂载远程文件系统。  </li>
<li>3: 完全的多用户状态(有NFS)，登陆后进入控制台命令行模式。  </li>
<li>4: 系统未使用，保留。  </li>
<li>5: X11控制台，登陆后进入图形GUI模式。  </li>
<li>6: 系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动。</li>
</ul>
<p>开机流程说明:  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">开机--&gt; BIOS --&gt; /boot --&gt; systemd进程 --&gt; 运行级别 --&gt; 运行级别对应的服务<br></code></pre></td></tr></table></figure>

<p><strong>chkconfig</strong><br>通过chkconfig可以给服务各个级别设置自启动&#x2F;关闭<br>chkconfig指令管理的服务在&#x2F;etc&#x2F;etc&#x2F;init.d查看<br>基本语法: </p>
<ul>
<li><code>chkconfig --list</code> #显示服务在各个运行级别的自启动状态</li>
<li><code>chkconfig --level 5 service_name [on|off]</code></li>
<li>演示:(对network服务进行操作) <code>chkkonfig --level 3 network on</code></li>
</ul>
<p><strong>systemctl</strong><br>基本语法: <code>systemctl [start|stop|restart|reload|status] service_name</code><br>systemctl管理的指令在<code>/usr/lib/systemd/system</code>查看  </p>
<ul>
<li>systemctl设置服务自启动状态<ul>
<li><code>systemctl list-unit-files | grep service_name</code>: 查看服务开机自启动状态</li>
<li><code>systemctl enable service_name</code>: 设置开机自启动</li>
<li><code>systemctl disable service_name</code>: 设置开机不启动</li>
<li><code>systemctl is-enabled service_name</code>: 查看服务是否开机启动</li>
</ul>
</li>
</ul>
<p>案例: 查看当前防火墙的状态, 关闭防火墙和重启防火墙  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">ls -l /usr/lib/systemd/system/firewalld.service # 查看防火墙服务文件<br>systemctl list-unit-files | grep firewalld<br>systemctl status firewalld<br>systemctl stop firewalld<br>telnet 127.0.0.1 22 # 测试是否关闭<br><br></code></pre></td></tr></table></figure>

<p><strong>防火墙firwall指令</strong>  </p>
<ul>
<li><code>firewall-cmd --permanenet --add-port=端口号/协议</code>: 打开端口   </li>
<li><code>firewall-cmd --permanent --remove-port=端口号/协议</code>: 关闭端口  </li>
<li><code>firewall-cmd --reload</code>: 重新加载, 才能生效</li>
<li><code>firewall-cmd --query-port=端口号/协议</code>: 查看端口是否开放</li>
<li><code>firewall-cmd --list-ports</code>: 查看已开放的端口</li>
<li><code>firewall-cmd --list-all</code>: 查看防火墙状态</li>
<li><code>netstat -antp</code>: 查看端口是否开放</li>
</ul>
<p><strong>动态监控进程top</strong><br>top与ps类似, 它们都用来显示正在执行的进程, Top与ps最大的不同之处, 在于top在执行一段时间可以更新正在运行的进程.<br>基本语法: <code>top [选项]</code>  </p>
<ul>
<li><code>-i</code>: 不显示任何限制或者僵死的进程</li>
<li><code>-d 秒速</code>: 刷新间隔, 可以设置成0.1秒, 但是刷新间隔过短, 会导致top的cpu占用率非常高, 默认为3秒  </li>
<li><code>-p 进程号</code>: 查看某个进程的详细信息</li>
</ul>
<p>交互操作: </p>
<ul>
<li><code>q</code>: 退出top</li>
<li><code>d</code>: 修改刷新间隔</li>
<li><code>k</code>: 杀死进程</li>
<li><code>u</code>: 按用户筛选</li>
<li><code>P</code>: 按CPU使用率排序, 默认</li>
<li><code>M</code>: 按内存使用率排序</li>
<li><code>N</code>: 按进程号排序</li>
</ul>
<p><strong>监控网络状态netstat</strong><br>基本语法: <code>netstat [选项]</code>  </p>
<ul>
<li><code>-an</code>: 按一定顺序排列输出</li>
<li><code>-p</code>: 显示进程号和进程名</li>
</ul>
<h2 id="2-10-RPM和APT"><a href="#2-10-RPM和APT" class="headerlink" title="2.10 RPM和APT"></a>2.10 RPM和APT</h2><p>RPM 用于互联网下载包的打包及安装工具, 它包含在某些Linux发行版中, 比如CentOS, Fedora等。  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">查询已安装的软件包</span><br>rpm -q [包名] # 查看是否已安装指定的软件包<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">查询安装的所有软件包</span><br>rpm -qa # 列出系统中所有已安装的软件包<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">查询软件包的信息</span><br>rpm -qi [包名] # 查看某个已安装包的详细信息<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">查询软件包文件列表</span><br>rpm -ql [包名] # 显示某个已安装包包含的文件<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">查询文件属于哪个软件包</span><br>rpm -qf [文件路径] # 通过文件路径查询它所属的软件包<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">安装软件包</span><br>rpm -ivh [包文件名] # 安装指定的 .rpm 包文件 (-i安装, -v显示详细信息, -h显示进度条)<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">升级软件包</span><br>rpm -Uvh [包文件名] # 升级或安装软件包 (-U升级或安装)<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">仅升级已安装的软件包</span><br>rpm -Fvh [包文件名] # 仅升级已安装的软件包（如包未安装则不操作）<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">卸载软件包</span><br>rpm -e [包名] # 卸载已安装的包（需指定包名而非文件名）<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">验证软件包完整性</span><br>rpm -V [包名] # 验证指定包中的文件是否已被更改<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">检查安装包文件的依赖关系</span><br>rpm -qpR [包文件名] # 检查安装某个 .rpm 包文件时可能存在的依赖关系<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">检查已安装包的依赖</span><br>rpm -qR [包名] # 检查已安装的包的依赖关系<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">显示包文件的说明信息（不安装）</span><br>rpm -qip [包文件名] # 查看指定 .rpm 包文件的描述信息<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">显示包文件包含的文件列表（不安装）</span><br>rpm -qlp [包文件名] # 查看指定 .rpm 包文件中包含的文件列表<br><br></code></pre></td></tr></table></figure>

<p>APT  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">更新源</span><br>vim /etc/apt/sources.list<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">更新软件包列表</span><br>sudo apt update # 从软件源获取最新的包信息，但不安装更新<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">升级所有已安装的软件包</span><br>sudo apt upgrade # 安装所有已安装包的最新版本（不会移除包）<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">升级所有已安装的软件包，并允许移除旧包</span><br>sudo apt full-upgrade # 在需要时移除冲突的旧包，以完成系统的全面升级<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">安装软件包</span><br>sudo apt install [包名] # 安装指定软件包，如果已安装则不重复安装<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">安装特定版本的软件包</span><br>sudo apt install [包名]=[版本号] # 安装指定版本的软件包<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">卸载软件包（保留配置文件）</span><br>sudo apt remove [包名] # 卸载指定软件包，但保留配置文件<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">完全卸载软件包（包含配置文件）</span><br>sudo apt purge [包名] # 完全卸载指定软件包及其配置文件<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">自动移除不再需要的依赖包</span><br>sudo apt autoremove # 移除安装时自动添加、但现在已不再需要的依赖包<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">搜索软件包</span><br>apt search [关键词] # 在包列表中搜索与关键词匹配的包<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">显示软件包的信息</span><br>apt show [包名] # 显示指定包的详细信息（包括描述、依赖等）<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">查看软件包是否已安装</span><br>dpkg -l | grep [包名] # 使用 dpkg 列出并过滤出指定包的信息<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">列出软件包的依赖关系</span><br>apt depends [包名] # 列出指定包的依赖关系<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">列出包的反向依赖（哪些包依赖此包）</span><br>apt rdepends [包名] # 列出指定包的反向依赖关系<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">清理下载的包缓存</span><br>sudo apt clean # 清空 /var/cache/apt/archives 中的已下载包文件<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">清除已删除软件包的缓存文件</span><br>sudo apt autoclean # 清除不再需要的包缓存文件（已删除包的缓存）<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">检查系统中是否有未满足的依赖</span><br>sudo apt check # 检查系统中是否存在依赖问题<br><br></code></pre></td></tr></table></figure>


<h2 id="2-11-Shell编程"><a href="#2-11-Shell编程" class="headerlink" title="2.11 Shell编程"></a>2.11 Shell编程</h2><p>Shell是一个命令行解释器, 它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序, 用户可以用shell来启动、挂起、停止甚至是编写一些程序  </p>
<h3 id="2-11-1-执行方式"><a href="#2-11-1-执行方式" class="headerlink" title="2.11.1 执行方式"></a>2.11.1 执行方式</h3><ol>
<li>脚本的格式要求:<ul>
<li>脚本以<code>#/bin/bash</code>开头  </li>
<li>脚本需要有可执行权限</li>
</ul>
</li>
<li>脚本常用执行方式:<ul>
<li>直接执行脚本：<code>sh 脚本文件名</code></li>
<li>脚本文件执行：<code>./脚本文件名</code> (需要添加执行权限 +x)</li>
</ul>
</li>
</ol>
<p>案例: </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash <span class="hljs-comment"># 声明解释器, 一般默认是bash, 所以有时候没有添加这一行也会执行后续内容</span></span><br>echo &quot;Hello World!&quot;<br></code></pre></td></tr></table></figure>


<h3 id="2-11-2-Shell中的变量"><a href="#2-11-2-Shell中的变量" class="headerlink" title="2.11.2 Shell中的变量"></a>2.11.2 Shell中的变量</h3><ol>
<li>普通变量：<ul>
<li><code>set</code> 显示当前shell中所有的变量</li>
<li>系统变量<ul>
<li>$HOSTNAME</li>
<li>$USER</li>
<li>$PATH</li>
<li>$HOME</li>
<li>定义环境变量: <code>export VAR_NAME=VALUE</code></li>
</ul>
</li>
<li>自定义变量<ul>
<li>变量定义规则: 可以由字母数字下划线组成, 但是不能以数字开头; 等号两边不能有空格; 变量名一般大写</li>
<li>定义变量: <code>变量名=值</code></li>
<li>引用变量：<code>$变量名</code></li>
<li>删除变量：<code>unset 变量名</code></li>
<li>声明静态变量：<code>readonly 变量名</code> (静态变量不能被unset, 也不能被修改)</li>
</ul>
</li>
<li>将命令返回值赋值给变量: 使用用反引号或者是括号</li>
</ul>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">A=`date`<br>echo &quot;$A&quot;<br><br>C=(date)<br>echo &quot;$C&quot;<br><br></code></pre></td></tr></table></figure>
<ol start="4">
<li><p>Shell脚本多行注释: </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">:&lt;&lt;! 内容 <br>内容<br>!<br><br></code></pre></td></tr></table></figure>
</li>
<li><p>位置参数变量<br>  当执行一个shell脚本时, 如果希望获取命令行的参数信息, 可以使用位置参数变量.<br>  比如: <code>./myshell.sh 100 200</code></p>
</li>
</ol>
<ul>
<li>基本语法:<ul>
<li><code>$n</code>: n为数字, 0代表命令本身(不含参数), 1-9代表第一到第九个参数, 参数超过十个(包含10), 使用大括号, 例如<code>$&#123;12&#125;</code></li>
<li><code>$*</code>: 代表命令行中所有的参数, 把所有参数看成一个整体</li>
<li><code>$@</code>: 代表命令行中所有的参数, 把每个参数看成单独个体</li>
<li><code>$#</code>: 代表命令行中参数的个数</li>
</ul>
</li>
</ul>
<ol start="3">
<li>预定义变量<br>   shell设计者事先已经定义好的变量, 可以直接在shell中使用.</li>
</ol>
<ul>
<li><code>$$</code>: 当前进程的进程号</li>
<li><code>$!</code>: 后台运行的最后一个进程的进程号</li>
<li><code>$?</code>: 最后一次执行命令的返回状态, 如果变量为0, 则说明上一个命令执行成功</li>
</ul>
<h3 id="2-11-3-Shell中的运算符"><a href="#2-11-3-Shell中的运算符" class="headerlink" title="2.11.3 Shell中的运算符"></a>2.11.3 Shell中的运算符</h3><p>   基本语法:</p>
<ol>
<li><code>$((运算式))</code>, <code>$[运算式]</code>, <code>expr 运算式</code></li>
<li><code>expr</code>运算符之间需要有空格, 加、减、乘、除、取余用<code>+, -, \*, /, %</code>表示</li>
</ol>
<h3 id="2-11-4-条件判断"><a href="#2-11-4-条件判断" class="headerlink" title="2.11.4 条件判断"></a>2.11.4 条件判断</h3><p>   基本语法: </p>
<ol>
<li><code>[ condition ]</code>: 非空返回true, 可以使用<code>$?</code>验证, 0为true, 1为false(注意: condition前后需要有空格)</li>
</ol>
<p>   if判读:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">基本语法</span><br>if [ condition ]; then<br>Do some things<br>fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">或者</span><br>if [ condition ]<br>then<br>Do some things<br>fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">或者</span><br>if [ condition ]<br>then<br>Do some things<br>elif [ condition ]<br>then<br>Do other things<br>else<br>then<br>Don&#x27;t do it<br>fi<br><br></code></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">数值比较</span><br>-eq：等于<br>    if [ &quot;$a&quot; -eq &quot;$b&quot; ]; then<br>      echo &quot;a equals b&quot;<br>    fi<br><br>-ne：不等于<br>    if [ &quot;$a&quot; -ne &quot;$b&quot; ]; then<br>      echo &quot;a is not equal to b&quot;<br>    fi<br><br>-lt：小于<br>    if [ &quot;$a&quot; -lt &quot;$b&quot; ]; then<br>      echo &quot;a is less than b&quot;<br>    fi<br><br>-le：小于或等于<br>    if [ &quot;$a&quot; -le &quot;$b&quot; ]; then<br>      echo &quot;a is less than or equal to b&quot;<br>    fi<br><br>-gt：大于<br>    if [ &quot;$a&quot; -gt &quot;$b&quot; ]; then<br>      echo &quot;a is greater than b&quot;<br>    fi<br><br>-ge：大于或等于<br>    if [ &quot;$a&quot; -ge &quot;$b&quot; ]; then<br>      echo &quot;a is greater than or equal to b&quot;<br>    fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">字符串比较</span><br>=：字符串相等<br>    if [ &quot;$str1&quot; = &quot;$str2&quot; ]; then<br>      echo &quot;Strings are equal&quot;<br>    fi<br><br>!=：字符串不相等<br>    if [ &quot;$str1&quot; != &quot;$str2&quot; ]; then<br>      echo &quot;Strings are not equal&quot;<br>    fi<br><br>-z：字符串为空<br>    if [ -z &quot;$str1&quot; ]; then<br>      echo &quot;str1 is empty&quot;<br>    fi<br><br>-n：字符串不为空<br>    if [ -n &quot;$str2&quot; ]; then<br>      echo &quot;str2 is not empty&quot;<br>    fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">文件判断</span><br>-e：文件存在<br>    if [ -e &quot;$file&quot; ]; then<br>      echo &quot;File exists&quot;<br>    fi<br><br>-f：文件存在且为普通文件<br>    if [ -f &quot;$file&quot; ]; then<br>      echo &quot;File is a regular file&quot;<br>    fi<br><br>-d：文件存在且为目录<br>    if [ -d &quot;$file&quot; ]; then<br>      echo &quot;It is a directory&quot;<br>    fi<br><br>-r：文件存在且可读<br>    if [ -r &quot;$file&quot; ]; then<br>      echo &quot;File is readable&quot;<br>    fi<br><br>-w：文件存在且可写<br>    if [ -w &quot;$file&quot; ]; then<br>      echo &quot;File is writable&quot;<br>    fi<br><br>-x：文件存在且可执行<br>    if [ -x &quot;$file&quot; ]; then<br>      echo &quot;File is executable&quot;<br>    fi<br><br>-s：文件存在且大小大于 0<br>    if [ -s &quot;$file&quot; ]; then<br>      echo &quot;File size is greater than 0&quot;<br>    fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">逻辑运算</span><br>-a：逻辑与（AND）<br>    if [ -r &quot;$file&quot; -a -w &quot;$file&quot; ]; then<br>      echo &quot;File is readable and writable&quot;<br>    fi<br><br>-o：逻辑或（OR）<br>    if [ -r &quot;$file&quot; -o -w &quot;$file&quot; ]; then<br>      echo &quot;File is readable or writable&quot;<br>    fi<br><br>!：逻辑非（NOT）<br>    if [ ! -x &quot;$file&quot; ]; then<br>      echo &quot;File is not executable&quot;<br>    fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">组合条件</span><br>&amp;&amp;：条件1和条件2都为真<br>    if [ &quot;$a&quot; -lt &quot;$b&quot; ] &amp;&amp; [ &quot;$str1&quot; != &quot;$str2&quot; ]; then<br>      echo &quot;a is less than b and str1 is not equal to str2&quot;<br>    fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">使用双中括号（更适合字符串和正则匹配）</span><br>[[ ... ]]：字符串和正则表达式匹配<br>    if [[ &quot;$str1&quot; =~ ^h.*o$ ]]; then<br>      echo &quot;str1 matches the regex pattern&quot;<br>    fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">示例：检查变量是否为空</span><br>-z：字符串为空<br>    if [ -z &quot;$var&quot; ]; then<br>      echo &quot;var is empty&quot;<br>    fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">示例：检查文件是否存在且可执行</span><br>-x：文件存在且可执行<br>    if [ -x &quot;$file&quot; ]; then<br>      echo &quot;File is executable&quot;<br>    fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">示例：两个条件都为真</span><br>&amp;&amp;：条件1和条件2都为真<br>    if [ &quot;$a&quot; -eq 5 ] &amp;&amp; [ &quot;$b&quot; -eq 10 ]; then<br>      echo &quot;Both conditions are true&quot;<br>    fi<br><br></code></pre></td></tr></table></figure>

<h3 id="2-11-5-case语句"><a href="#2-11-5-case语句" class="headerlink" title="2.11.5 case语句"></a>2.11.5 case语句</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">基本语法</span><br>case $变量名 in<br>&quot;var1&quot;)<br>Do the thing of var1<br>;;<br>&quot;var2&quot;)<br>Do the thing of var2<br>&#x27;&#x27;<br>&quot;var3&quot;)<br>Do the thing of var3<br>*)<br>Do the things that are not the case var1, var2, var3<br>esac<br></code></pre></td></tr></table></figure>

<h3 id="2-11-6-循环控制"><a href="#2-11-6-循环控制" class="headerlink" title="2.11.6 循环控制"></a>2.11.6 循环控制</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-keyword">for</span> 循环基本语法分</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">基本语法 1</span><br>for var in var1 var2 var3<br>do<br>Do some repeate things<br>done<br><span class="hljs-meta prompt_">#</span><span class="language-bash">例如</span><br>for i in $@<br>do<br>echo $i<br>done<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">基本语法 2</span><br>for (( start_var;condition;var_change))<br>do <br>Do sone repeate things<br>done<br><span class="hljs-meta prompt_">#</span><span class="language-bash">例如</span><br>for ((i=0;i&lt;9;i++))<br>do<br>echo $i<br>done<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-keyword">while</span> 循环</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">基本语法</span><br>while [ condition ] # 注意空格<br>do<br>Do some things repeately<br>done<br><br><br></code></pre></td></tr></table></figure>
<h3 id="2-11-7-读取控制台输入"><a href="#2-11-7-读取控制台输入" class="headerlink" title="2.11.7 读取控制台输入"></a>2.11.7 读取控制台输入</h3><p>基本语法: <code>read [选项] [参数]</code></p>
<ul>
<li>选项:<ul>
<li><code>-p</code>: 指定读取值时的提示符</li>
<li><code>-t</code>: 指定读取值时的等待时间(秒)</li>
</ul>
</li>
<li>参数: 指定读取值的变量名</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">案例</span><br>read -p &quot;请输入A:&quot; A<br>echo &quot;A = $A&quot;<br><br>read -p &quot;请输入B:&quot; -t 3 B # 3秒之内输入B的值, 否则自动执行下一行<br>echo &quot;B = $B&quot;<br><br></code></pre></td></tr></table></figure>

<h3 id="2-11-8-函数"><a href="#2-11-8-函数" class="headerlink" title="2.11.8 函数"></a>2.11.8 函数</h3><p>shell中的函数包括系统函数和自定义函数  </p>
<ol>
<li>系统函数</li>
</ol>
<ul>
<li><p><code>basename</code><br>基本语法: <code>basename [pathname] [suffix]</code><br>功能: 返回完整路径最后&#x2F;的部分(不包括&#x2F;), 常用于获取文件名<br>suffix为后缀, 如果指定suffix, basename会将pathname中的suffix去掉<br>例子: <code>basename /home/ubuntu/t.txt .txt</code>, 结果是<code>t</code></p>
</li>
<li><p><code>dirname</code><br>基本语法: <code>dirname pathname</code><br>功能: 返回完整路径的目录(即除去pathname中最后的&#x2F;及之后的部分)<br>例子: <code>dirname /home/ubuntu/t.txt</code> 结果是: <code>/home/ubuntu</code></p>
</li>
</ul>
<ol start="2">
<li>自定义函数</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">基本语法</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">定义</span><br>[ function ] funcname()<br>&#123;<br>  Action;<br>  [return int];<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">调用</span><br>funcname [value]<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">例子1:</span> <br><br>func1()&#123;<br>  echo &quot;$1&quot;<br>  echo &quot;$2&quot;<br>&#125;<br><br>func1 23 43<br><span class="hljs-meta prompt_"># </span><span class="language-bash">输出为:</span><br>23 43<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">例子2:</span> <br>function func2()&#123;<br>    echo $A<br>    echo $B<br>&#125;<br>read -p &quot;请输入一个字符: &quot; A # AAA<br>read -p &quot;请输入一个字符: &quot; B # BBB<br>func2 $A $B<br><span class="hljs-meta prompt_"># </span><span class="language-bash">输出为:</span><br>AAA<br>BBB<br><br></code></pre></td></tr></table></figure>

<h3 id="2-11-9-综合案例"><a href="#2-11-9-综合案例" class="headerlink" title="2.11.9 综合案例"></a>2.11.9 综合案例</h3><p>每天凌晨2:30备份数据库testDatabse到&#x2F;data&#x2F;backup&#x2F;db<br>开始备份和备份结束都能给出相应的提示信息<br>备份后的文件要求以备份时间为文件名, 并打包为.tar.gz的形式<br>在备份的同时, 检查是否有10天前的备份数据库文件, 有就将其删除  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">设置备份路径和数据库名称</span><br>BACKUP_DIR=&quot;/data/backup/db&quot;<br>DB_NAME=&quot;testDatabase&quot;<br>TIMESTAMP=$(date +&quot;%Y%m%d%H%M&quot;)<br>BACKUP_FILE=&quot;$&#123;BACKUP_DIR&#125;/$&#123;DB_NAME&#125;_$&#123;TIMESTAMP&#125;.tar.gz&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">创建备份目录（如果不存在）</span><br>mkdir -p &quot;$BACKUP_DIR&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">开始备份</span><br>echo &quot;开始备份数据库 $&#123;DB_NAME&#125; 到 $&#123;BACKUP_FILE&#125;&quot;<br>mysqldump -u root -pYOUR_PASSWORD $DB_NAME | gzip &gt; &quot;$BACKUP_FILE&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">检查备份是否成功</span><br>if [ $? -eq 0 ]; then<br>  echo &quot;数据库备份成功: $&#123;BACKUP_FILE&#125;&quot;<br>else<br>  echo &quot;数据库备份失败&quot;<br>  exit 1<br>fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">删除 10 天前的备份文件</span><br>find &quot;$BACKUP_DIR&quot; -name &quot;$&#123;DB_NAME&#125;_*.tar.gz&quot; -type f -mtime +10 -exec rm -f &#123;&#125; \;<br><br>echo &quot;旧备份文件清理完成&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">保存为/usr/sbin/mysql_db_backup.sh</span><br></code></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">30 02 * * * sh /usr/sbin/mysql_db_backup.sh<br><br></code></pre></td></tr></table></figure>

<h1 id="三、高级篇"><a href="#三、高级篇" class="headerlink" title="三、高级篇"></a>三、高级篇</h1><h2 id="3-1-日志管理"><a href="#3-1-日志管理" class="headerlink" title="3.1 日志管理"></a>3.1 日志管理</h2><p>日志文件是重要的系统信息文件, 其中记录了许多重要的系统事件, 包括用户的登录信息, 系统的启动信息, 系统的安全信息, 邮件相关信息, 各种服务相关信息<br>日志对于安全来说很重要, 它记录了系统每天发生的各种事件, 通过日志来检查错误发生的原因, 或者受到攻击时攻击者留下的痕迹.<br>日志是用来记录重大事件的工具.<br><code>/var/log</code>目录就是系统日志文件的保存位置  (variable)<br><code>rsyslogd</code>是用于记录日志的后台程序, 对应的配置文件是<code>/etc/rsyslog.conf</code>  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs shell">/var/log/boot.log            # 系统启动日志<br>/var/log/cron                # cron 作业调度器日志<br>/var/log/cpus               # CPU 使用情况日志<br><br><br><br>/var/log/syslog              # 系统日志（记录系统的常规操作信息和错误）<br>/var/log/messages            # 系统消息日志，包含大多数常规系统事件<br>/var/log/auth.log            # 用户认证相关日志（登录、sudo等）<br>/var/log/dmesg               # 内核启动信息日志<br><br>/var/log/mail.log            # 邮件系统日志<br>/var/log/apache2/            # Apache Web 服务器日志（可能位于该目录或 /var/log/httpd/）<br>/var/log/nginx/              # Nginx Web 服务器日志<br>/var/log/mysql/              # MySQL 数据库日志<br>/var/log/postgresql/         # PostgreSQL 数据库日志<br>/var/log/daemon.log          # 系统守护进程的日志<br>/var/log/kern.log            # 内核日志<br>/var/log/user.log            # 用户相关的日志（用户登录/注销等）<br>/var/log/lpr.log             # 打印服务日志<br>/var/log/ufw.log             # 防火墙日志（Ubuntu的ufw）<br>/var/log/debug               # 调试日志（开发调试使用）<br>/var/log/apt/history.log     # APT 包管理历史日志<br>/var/log/apt/term.log        # APT 包管理终端输出日志<br><br></code></pre></td></tr></table></figure>

<h3 id="3-1-1-rsyslogd配置文件"><a href="#3-1-1-rsyslogd配置文件" class="headerlink" title="3.1.1 rsyslogd配置文件"></a>3.1.1 rsyslogd配置文件</h3><p> <code>ps -aux | grep rsyslog | grep -v grep</code> 查看rsyslogd进程是否启动, 只有启动了日志才能正常记录<br> <code>systemctl list-unit-files | grep rsyslog</code> 查看rsyslogd是否是自启动状态  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">配置文件 : /etc/rsyslog.con</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">编辑文件时的格式为:</span>  <br>*.*    存放日志文件<br><span class="hljs-meta prompt_"># </span><span class="language-bash">修改配置文件后重启日志服务生效</span><br>systemctl restart rsyslog<br><span class="hljs-meta prompt_"># </span><span class="language-bash">其中第一个*代表日志类型，第二个*代表日志级别</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">日志类型分为:</span><br>auth   ##pam产生的日志<br>authpriv ##ssh、ftp等登录信息的验证信息<br>corn  ##时间任务相关<br>kern  ##内核<br>lpr  ##打印<br>mail  ##邮件<br>mark(syslog)-rsyslog ##服务内部的信息，时间标识<br>news  ##新闻组<br>user  ##用户程序产生的相关信息<br>uucp  ##unix to nuix copy主机之间相关的通信<br>local 1-7  ##自定义的日志设备<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">日志级别为:</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">从上到下，级别从低到高，记录信息越来越少</span><br>debug    ##有调试信息的，日志通信最多<br>info     ##一般信息日志，最常用<br>notice   ##最具有重要性的普通条件的信息<br>warning  ##警告级别<br>err      ##错误级别，阻止某个功能或者模块不能正常工作的信息<br>crit     ##严重级别，阻止整个系统或者整个软件不能正常工作的信息<br>alert    ##需要立刻修改的信息<br>emerg    ##内核崩溃等重要信息<br>none     ##什么都不记录<br><br></code></pre></td></tr></table></figure>

<p><strong>日志的格式包含以下4列</strong>  </p>
<ul>
<li>事件产生的时间</li>
<li>产生事件的服务器的主机名</li>
<li>产生事件的服务名或程序名</li>
<li>事件的具体信息<br>例如: <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">2024-11-13T07:20:59.433134+00:00 LinuxLearn rsyslogd: [origin software=&quot;rsyslogd&quot; swVersion=&quot;8.2312.0&quot; x-pid=&quot;823762&quot; x-info=&quot;https://www.rsyslog.com&quot;] start<br>2024-11-13T07:21:01.985136+00:00 LinuxLearn CRON[823844]: pam_unix(cron:session): session opened for user root(uid=0) by root(uid=0)<br>2024-11-13T07:21:01.985662+00:00 LinuxLearn CRON[823845]: (root) CMD (date &gt; mydate.txt)<br>2024-11-13T07:21:01.987758+00:00 LinuxLearn CRON[823844]: pam_unix(cron:session): session closed for user root<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-1-2-日志轮替"><a href="#3-1-2-日志轮替" class="headerlink" title="3.1.2 日志轮替"></a>3.1.2 日志轮替</h3><p>日志轮替就是把旧的日志文件移动并改名, 同时建立新的空日志文件, 当旧的日志文件超出保存范围之后, 就会被自动删除  </p>
<ol>
<li>Linux使用<code>logrotate</code>进行日志轮替管理，要想改变日志轮替文件名字，通过 <code>/etc/logrotate.conf</code> 配文件中“dateext”等参数  </li>
<li>如果配置文件中有“dateext”参数，那么日志会用<strong>日期</strong>来作为日志文件的后缀，例如“secure-20201010” 。这样日志文件名不会重叠，也就不需要日志文件的改名，只需要指定保存日志个数，删除多余的日志文件即可</li>
<li>如果配置文件中没有“dateext参数，日志文件就需要进行改名了。当第一次进行日志轮替时，当前的“secure“日志会自动改名为“secure.1”. 然后新创建“secure”日志, 用来保存新的日志.</li>
<li>当第二次进行日志轮替时, “secure.1”会自动改名为“secure.2”, 当前的“secure”日志会自动改名为“secure.1”, 然后也会新建“secure”日志, 用来保存新的日志. 依次类推.如果超过日志的默认保存个数, 系统会自动删除目前存在的最旧的日志.</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">/etc/logrotate.conf</span> <br><span class="hljs-meta prompt_"># </span><span class="language-bash">全局配置</span><br>weekly  # 每周对日志文件进行一次轮替<br>rotate 5 # 保留5个日志文件<br><br>create  # 日志轮替后创建新的空日志文件<br><br>dateext  # 使用日期作为日志文件后缀<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">单独配置 (优先级更高)</span><br><br>/var/log/btmp&#123;<br>  missingok # 如果日志不存在, 忽略该日志的警告信息<br>  monthly <br>  create 0600 root utmp # 建立新的日志文件, 权限是0664 (0普通文件, 664(wr-wr-r--)), 所有者为root, 组织属于utmp<br>  rotate 1<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p><strong>配置参数说明</strong>  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">全局配置参数：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-----------------------</span><br>daily                         # 每天轮替日志<br>weekly                        # 每周轮替日志<br>monthly                       # 每月轮替日志<br>yearly                        # 每年轮替日志<br>rotate &lt;num&gt;                  # 保留最近的 &lt;num&gt; 个轮替文件<br>compress                      # 启用压缩（默认使用 gzip）<br>delaycompress                 # 延迟压缩，直到下次轮替<br>notifempty                    # 如果日志文件为空，则不轮替<br>missingok                     # 如果日志文件丢失，不报错<br>create &lt;mode&gt; &lt;owner&gt; &lt;group&gt;  # 创建新日志文件时设置权限（mode）、所有者（owner）和组（group）<br>sharedscripts                 # 脚本共享，轮替多个文件时只运行一次脚本<br>postrotate                    # 轮替后执行的脚本（结束脚本）<br>endscript                     # 结束脚本标记<br>prerotate                     # 轮替前执行的脚本（开始脚本）<br><span class="hljs-meta prompt_"># </span><span class="language-bash">-----------------------</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">针对特定日志文件配置的参数：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-----------------------</span><br>size &lt;size&gt;                    # 当日志文件达到指定大小时进行轮替（例如：size 100M）<br>ifempty                       # 即使日志文件为空，也进行轮替<br>dateext                       # 使用日期扩展名进行轮替（例如：logfile.1 -&gt; logfile-20231111.1）<br>dateformat &lt;format&gt;            # 自定义日期扩展名的格式（默认为：%Y%m%d）<br>su &lt;user&gt; &lt;group&gt;              # 使用指定的用户和组运行 logrotate 进程<br><span class="hljs-meta prompt_"># </span><span class="language-bash">-----------------------</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">其他常见选项：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-----------------------</span><br>compresscmd &lt;cmd&gt;              # 自定义压缩命令，默认是 gzip<br>uncompresscmd &lt;cmd&gt;            # 自定义解压命令，默认是 gunzip<br>compressext &lt;ext&gt;              # 自定义压缩文件扩展名，默认为 .gz<br>createonerr                    # 如果日志文件创建失败，则立即退出<br>olddir &lt;dir&gt;                   # 将旧日志文件移动到指定目录（例如：/var/log/old）<br>nomail                        # 禁止发送邮件<br>mail &lt;email&gt;                   # 如果轮替失败，发送邮件给指定用户<br><span class="hljs-meta prompt_"># </span><span class="language-bash">-----------------------</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">示例：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-----------------------</span><br>/var/log/nginx/*.log &#123;<br>  daily<br>  rotate 7<br>  compress<br>  delaycompress<br>  missingok<br>  notifempty<br>  create 0640 www-data www-data<br>  postrotate<br>    systemctl reload nginx<br>  endscript<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">针对 MySQL 日志轮替示例：</span><br>/var/log/mysql/*.log &#123;<br>  weekly<br>  rotate 5<br>  compress<br>  missingok<br>  notifempty<br>  create 0644 mysql mysql<br>  sharedscripts<br>  postrotate<br>    /usr/bin/mysqladmin flush-logs<br>  endscript<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h3 id="3-1-3-查看内存日志"><a href="#3-1-3-查看内存日志" class="headerlink" title="3.1.3 查看内存日志"></a>3.1.3 查看内存日志</h3><p> <code>journalctl</code>可以查看内存日志<br> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell"> journalctl                        # 查看所有日志<br>journalctl -b                     # 查看当前启动的日志<br>journalctl -b -1                  # 查看上次启动的日志<br>journalctl -xe                    # 查看错误日志，显示详细的错误信息<br>journalctl -f                     # 实时查看日志（类似于 `tail -f`）<br>journalctl -u &lt;service_name&gt;      # 查看特定服务的日志（例如：journalctl -u nginx）<br>journalctl --since &quot;2024-11-01&quot;   # 查看从某个日期之后的日志<br>journalctl --until &quot;2024-11-02&quot;   # 查看到某个日期的日志<br>journalctl --since &quot;2 hours ago&quot;  # 查看最近 2 小时的日志<br>journalctl -p err                 # 查看日志级别为 error 及以上的日志<br>journalctl -n 50                  # 查看最近 50 行日志<br>journalctl -o short               # 以简洁的格式输出日志<br>journalctl -o json                # 以 JSON 格式输出日志<br>journalctl -r                     # 反向查看日志（最新的日志显示在最前面）<br>journalctl --no-pager             # 禁止分页输出，所有日志一次性输出<br>journalctl -k                     # 只显示内核日志<br>journalctl -t &lt;unit_name&gt;          # 按系统单元名称过滤日志（例如：journalctl -t nginx）<br>journalctl -u &lt;service_name&gt; -f   # 实时查看指定服务的日志<br>journalctl _PID=1 _COMM=sshd      # 按进程 ID 和进程名过滤日志（例如：journalctl _PID=1 _COMM=sshd）<br></code></pre></td></tr></table></figure></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><br>dmesg | grep -i memory           # 查看内核启动日志中的内存信息<br>free -h                          # 查看系统内存使用情况（以人类可读的格式）<br>vmstat                           # 查看虚拟内存、进程、CPU等的统计信息<br>top                              # 实时查看系统资源使用情况（包括内存）<br>htop                             # 类似于 top，但提供更友好的交互界面（需要安装）<br>cat /proc/meminfo                # 查看详细的内存信息（包括总内存、可用内存、缓存等）<br>cat /proc/slabinfo               # 查看内核内存分配器的状态<br>watch -n 1 free -h               # 每秒更新一次，实时监控内存使用情况<br>ps aux --sort=-%mem              # 查看按内存占用排序的进程列表<br>sar -r 1 3                       # 使用 sar 命令查看内存使用情况，1 代表间隔 1 秒，3 表示查看 3 次<br><br></code></pre></td></tr></table></figure>



<h2 id="3-2-定制自己的linux"><a href="#3-2-定制自己的linux" class="headerlink" title="3.2 定制自己的linux"></a>3.2 定制自己的linux</h2><p>通过裁剪现有的Linux系统, 创建属于自己的Linux系统<br>首先了解Linux系统的启动流程<br><img src="/img/2024-08-15-Thu-T-Linux/image-4.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<h2 id="3-3-Linux内核源码和内核升级"><a href="#3-3-Linux内核源码和内核升级" class="headerlink" title="3.3 Linux内核源码和内核升级"></a>3.3 Linux内核源码和内核升级</h2><p><a target="_blank" rel="noopener" href="https://www.kernel.org/">Linux官网</a>并没有直接托管 Linux 0.01 的源代码，因为 Linux 内核的官方网站主要托管的是最新的稳定版本。<br>建议从官网的<a target="_blank" rel="noopener" href="https://git.kernel.org/pub/scm/linux/kernel/git/nico/archive.git/?h=v0.01">Linux Git 存储库</a>阅读Linux源码 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone git://git.kernel.org/pub/scm/linux/kernel/git/nico/archive.git<br>cd linux<br>git checkout v0.01<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">本人保存在了 /Users/fei/myspace/learnspace/Linux/archive 目录下</span><br></code></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">total 8<br>-rw-r--r--   1 fei  staff   2.1K Nov 13 17:31 Makefile          # Makefile是编译内核的核心文件，定义了如何构建内核、模块和其他相关文件<br>drwxr-xr-x   4 fei  staff   128B Nov 13 17:31 boot              # boot目录包含与内核启动相关的文件，如引导加载程序、启动映像等<br>drwxr-xr-x  21 fei  staff   672B Nov 13 17:31 fs                # fs目录包含与文件系统相关的代码，实现了多种文件系统的支持<br>drwxr-xr-x  18 fei  staff   576B Nov 13 17:31 include           # include目录包含内核源代码中使用的头文件，定义了内核接口、结构等<br>drwxr-xr-x   3 fei  staff    96B Nov 13 17:31 init              # init目录包含内核初始化代码，负责初始化系统并启动第一个用户空间进程<br>drwxr-xr-x  20 fei  staff   640B Nov 13 17:31 kernel            # kernel目录包含内核的核心功能代码，如调度、进程管理、系统调用等<br>drwxr-xr-x  14 fei  staff   448B Nov 13 17:31 lib               # lib目录包含内核需要的库文件，提供一些共享函数或基础功能<br>drwxr-xr-x   5 fei  staff   160B Nov 13 17:31 mm                # mm目录包含内存管理代码，包括虚拟内存、内存分配等<br>drwxr-xr-x   3 fei  staff    96B Nov 13 17:31 tools             # tools目录包含开发、调试和测试工具，这些工具通常用于内核开发和维护<br><br></code></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs shell">uname -a  # 查看当前内核版本<br>yum info kernel -q  # 检测内核版本, 显示可以升级的版本<br>yum list kernel -q <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">1. 更新本地包索引</span><br>sudo apt update                        # 更新APT包管理器的本地包索引<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. 检查可用的内核版本</span><br>apt search linux-image                 # 搜索可用的Linux内核映像，查看可用的内核版本<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">3. 安装新的内核版本</span><br>sudo apt install linux-image-&lt;version&gt; # 安装新版本的内核（例如：linux-image-5.4.0-80-generic）<br>                                        # 请将 &lt;version&gt; 替换为你需要安装的内核版本<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">4. 安装相应的内核头文件（可选，但对于编译内核模块很重要）</span><br>sudo apt install linux-headers-&lt;version&gt; # 安装对应版本的内核头文件<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">5. 更新GRUB引导加载器</span><br>sudo update-grub                      # 更新GRUB配置文件，确保新安装的内核版本出现在启动菜单中<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">6. 重启系统</span><br>sudo reboot                           # 重启系统，选择新内核启动<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">7. 检查当前内核版本</span><br>uname -r                              # 查看当前运行的内核版本，确保已成功切换到新内核<br><br><br></code></pre></td></tr></table></figure>

<h2 id="3-4-Linux备份与恢复"><a href="#3-4-Linux备份与恢复" class="headerlink" title="3.4 Linux备份与恢复"></a>3.4 Linux备份与恢复</h2><p>实体机无法做快照, 如果系统发生崩溃或者数据损坏, 后果严重, 需要重新做系统, 还会造成数据丢失, 所以我们可以使用备份和恢复技术<br>Linux备份和恢复的两种方式:  </p>
<ol>
<li>把需要的备份的文件达成tar包, 下次需要恢复的时候, 再解压覆盖即可</li>
<li>使用dump和restore命令</li>
</ol>
<p><strong>备份操作</strong>  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1. 使用 tar 命令进行备份（打包并压缩文件夹）</span><br>tar -czvf /path/to/backup/backup_name.tar.gz /path/to/directory  # 打包并压缩指定目录<br><span class="hljs-meta prompt_"># </span><span class="language-bash">解释：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-c：创建新的归档文件</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-z：使用 gzip 压缩</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-v：显示处理文件的详细信息</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-f：指定归档文件的名称（必须放在选项后面）</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. 使用 rsync 命令进行增量备份</span><br>rsync -av --delete /path/to/source/ /path/to/backup/  # 将源目录备份到目标目录<br><span class="hljs-meta prompt_"># </span><span class="language-bash">解释：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-a：归档模式，保留文件的权限、时间戳等信息</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-v：显示详细信息</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">--delete：删除目标目录中源目录中已删除的文件</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">3. 使用 <span class="hljs-built_in">dd</span> 命令进行磁盘备份</span><br>dd if=/dev/sda of=/path/to/backup/disk_backup.img bs=64K  # 将磁盘/dev/sda的内容备份到指定文件<br><span class="hljs-meta prompt_"># </span><span class="language-bash">解释：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-keyword">if</span>：输入文件或设备</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">of：输出文件或设备</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">bs：设置块大小（64KB）</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">4. 使用 dump 和 restore 进行文件系统备份</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">备份文件系统</span><br>dump -0u -f /path/to/backup/filesystem.dump /dev/sda1  # 备份文件系统到 dump 文件<br><span class="hljs-meta prompt_"># </span><span class="language-bash">恢复文件系统</span><br>restore -r -f /path/to/backup/filesystem.dump  # 从 dump 文件恢复文件系统<br></code></pre></td></tr></table></figure>

<p><strong>恢复操作</strong>  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1. 使用 tar 命令恢复备份</span><br>tar -xzvf /path/to/backup/backup_name.tar.gz -C /path/to/restore  # 从 tar.gz 文件恢复目录到指定位置<br><span class="hljs-meta prompt_"># </span><span class="language-bash">解释：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-x：提取归档文件</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-z：解压 gzip 文件</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-v：显示详细过程</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-f：指定归档文件</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-C：指定恢复的目标目录</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. 使用 rsync 恢复增量备份</span><br>rsync -av /path/to/backup/ /path/to/restore/  # 将备份的文件恢复到目标目录<br><span class="hljs-meta prompt_"># </span><span class="language-bash">解释：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-a：归档模式，保持文件属性</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-v：显示详细信息</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">3. 使用 <span class="hljs-built_in">dd</span> 命令恢复磁盘备份</span><br>dd if=/path/to/backup/disk_backup.img of=/dev/sda bs=64K  # 将备份的磁盘镜像恢复到目标磁盘<br><span class="hljs-meta prompt_"># </span><span class="language-bash">解释：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-keyword">if</span>：输入文件（备份的磁盘镜像）</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">of：输出文件或设备（目标磁盘）</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">bs：设置块大小（64KB）</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">4. 使用 restore 恢复文件系统</span><br>restore -r -f /path/to/backup/filesystem.dump  # 从 dump 文件恢复整个文件系统<br></code></pre></td></tr></table></figure>

<p><strong>dump和restore详解</strong>  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1. 使用 dump 命令进行文件系统备份</span><br>dump -0u -f /path/to/backup/filesystem.dump /dev/sda1  # 备份文件系统<br><span class="hljs-meta prompt_"># </span><span class="language-bash">解释：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">dump：创建文件系统备份</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-0：备份级别（0 表示完全备份，1-9 表示增量备份）</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-u：更新文件系统的备份状态（备份完成后会在文件系统的超级块中标记备份已完成）</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-f：指定备份的目标文件</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">/dev/sda1：指定需要备份的文件系统设备（例如，根文件系统或其他挂载的分区）</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">备份级别：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">- 级别 0：完全备份，备份所有文件。</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">- 级别 1 到 9：增量备份，仅备份上次备份之后修改或新增的文件。</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. 使用 restore 命令恢复文件系统</span><br>restore -r -f /path/to/backup/filesystem.dump  # 从 dump 文件恢复文件系统<br><span class="hljs-meta prompt_"># </span><span class="language-bash">解释：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">restore：恢复 dump 备份文件</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-r：恢复整个文件系统</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-f：指定需要恢复的备份文件（dump 文件）</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">使用 restore 命令时，通常需要在恢复过程中指定一个目标目录来还原文件系统内容。</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">恢复的方式：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">- 恢复整个文件系统：使用 -r 选项，直接从 dump 文件恢复。</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">- 恢复部分文件：使用 -i 选项进入交互式模式，选择恢复特定文件。</span><br></code></pre></td></tr></table></figure>

<h2 id="3-5-Linux可视化管理webmin和bt运维工具"><a href="#3-5-Linux可视化管理webmin和bt运维工具" class="headerlink" title="3.5 Linux可视化管理webmin和bt运维工具"></a>3.5 Linux可视化管理webmin和bt运维工具</h2><p>bt下载: <code>wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; bash install.sh</code></p>
<h2 id="3-6-Linux入侵检测、权限划分、系统优化"><a href="#3-6-Linux入侵检测、权限划分、系统优化" class="headerlink" title="3.6 Linux入侵检测、权限划分、系统优化"></a>3.6 Linux入侵检测、权限划分、系统优化</h2><h2 id="3-7-Linux面试题"><a href="#3-7-Linux面试题" class="headerlink" title="3.7 Linux面试题"></a>3.7 Linux面试题</h2><ol>
<li>分析t.log日志, 将各个ip地址截获, 并统计出现次数, 并按照从大大小排序</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">t.txt</span><br>http://192.168.200.10/index1.html<br>http://192.168.200.10/index2.html<br>http://192.168.200.20/index1.html<br>http://192.168.200.30/index1.html<br>http://192.168.200.40/index1.html<br>http://192.168.200.30/order.html<br>http://192.168.200.10/order.html<br><br></code></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">获取ip</span><br>cat t.txt | cut -d &quot;/&quot; -f 3 | sort | uniq -c | sort -nr # 对内容进行分割, 按照/划分, 取第三段. 并进行排序, 统计后再进行从大到小排序, <br><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>统计连接到服务器的各个ip情况, 并按照连接数从大到小排序</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">查看网络情况, 筛选出已连接的, 并按空格拆分, 取出第4位, 再去掉端口</span><br>netstat -an | grep ESTABLISHED | awk -F &quot; &quot; &#x27;&#123;print $4&#125;&#x27; | awk -F &quot;:&quot; &#x27;&#123;print $1&#125;&#x27;<br><br></code></pre></td></tr></table></figure>

<ol start="3">
<li><p>如忘记了mysql5.7数据库的ROOT用户的密码，如何找回?  </p>
</li>
<li><p>写出指令:统计ip访问情况，要求分析nginx访问日志(access.log)，找出访问页面数量在前十位的ip</p>
</li>
<li><p>使用tcpdump监听本机,将来自ip 192.168.200.1，tcp端口为22的数据，保存输出到tcpdump.log，用做将来数据分析</p>
</li>
<li><p>常用的Nginx模块，用来做什么</p>
</li>
</ol>
<h1 id="1-常用命令"><a href="#1-常用命令" class="headerlink" title="1. 常用命令"></a>1. 常用命令</h1><h2 id="1-1-系统操作"><a href="#1-1-系统操作" class="headerlink" title="1.1 系统操作"></a>1.1 系统操作</h2><ul>
<li>查看系统信息：<code>uname -a</code></li>
<li>查看系统版本：<code>cat /etc/issue</code></li>
<li>查看系统发行版：<code>cat /etc/os-release</code>， <code>lsb_release -a</code></li>
<li>查看系统内核版本：<code>uname -r</code></li>
</ul>
<h2 id="1-2-文件操作"><a href="#1-2-文件操作" class="headerlink" title="1.2 文件操作"></a>1.2 文件操作</h2><h3 id="1-2-1-sed命令"><a href="#1-2-1-sed命令" class="headerlink" title="1.2.1 sed命令"></a>1.2.1 <code>sed</code>命令</h3><p><a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-comm-sed.html">菜鸟教程</a></p>
<p>Linux sed 命令是利用脚本来处理文本文件。  </p>
<p>sed 可依照脚本的指令来处理、编辑文本文件。  </p>
<p>Sed 主要用来自动编辑一个或多个文件、简化对文件的反复操作、编写转换程序等。  </p>
<p>语法：</p>
<ul>
<li><code>sed [options] [script] [input]</code></li>
<li><code>sed [-hnV][-e&lt;script&gt;][-f&lt;script文件&gt;][文本文件]</code></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs sh"><br><span class="hljs-comment"># 1. 参数说明</span><br>-h或--<span class="hljs-built_in">help</span> 显示帮助。<br>-n或--quiet或--silent 仅显示script处理后的结果。<br>-V或--version 显示版本信息。<br><br>-e&lt;script&gt;或--expression=&lt;script&gt; 以选项中指定的**script**来处理输入的文本文件。<br>-f&lt;script文件&gt;或--file=&lt;script文件&gt; 以选项中指定的**script文件**来处理输入的文本文件。<br><br><span class="hljs-comment"># 2. 动作说明</span><br>a ：新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～<br>c ：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！<br>d ：删除，因为是删除啊，所以 d 后面通常不接任何东东；<br>i ：插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；<br>p ：打印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行～<br>s ：取代，可以直接进行取代的工作哩！通常这个 s 的动作可以搭配正则表达式！例如 1,20s/old/new/g 就是啦！<br><br><span class="hljs-comment"># 3. 实例</span><br>我们先创建一个 testfile 文件，内容如下：<br><span class="hljs-built_in">cat</span> testfile <span class="hljs-comment">#查看testfile 中的内容  </span><br>    HELLO LINUX!  <br>    Linux is a free unix-type opterating system.  <br>    This is a linux testfile!  <br>    Linux <span class="hljs-built_in">test</span> <br>    Google<br>    Taobao<br>    Runoob<br>    Tesetfile<br>    Wiki<br><br></code></pre></td></tr></table></figure>


<h3 id="1-2-2-find"><a href="#1-2-2-find" class="headerlink" title="1.2.2 find"></a>1.2.2 <code>find</code></h3><p>find [路径] [匹配条件] [动作]</p>
<h3 id="vim-操作"><a href="#vim-操作" class="headerlink" title="vim 操作"></a>vim 操作</h3><p>新建&#x2F;编辑 .vimrc 文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">syntax on<br>set nu<br><br></code></pre></td></tr></table></figure>






                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Tech/" class="category-chain-item">Tech</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Tech/" class="print-no-link">#Tech</a>
      
        <a href="/tags/Linux/" class="print-no-link">#Linux</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>2024-08-15-Thu-T-Linux</div>
      <div>http://example.com/2024/08/15/2024-08-15-Thu-T-Linux/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Fei</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>August 15, 2024</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/09/04/2024-09-04-Wed-T-Podman/" title="2024-09-04-Wed-T-Podman">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">2024-09-04-Wed-T-Podman</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/08/13/2024-08-13-Tue-T-Rancher%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8C%97/" title="2024-08-13-Tue-T-Rancher操作指北">
                        <span class="hidden-mobile">2024-08-13-Tue-T-Rancher操作指北</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'fei-cn-xie/fei-cn-xie.github.io');
      s.setAttribute('issue-term', 'pathname');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>





  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
